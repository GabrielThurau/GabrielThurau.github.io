<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <p id="test" style="height: 100vh; background-color: goldenrod;"></p>

    <script>



        document.querySelector('div.scaffold-layout__inner').addEventListener("mouseleave", (event) => {
            alert('please do not leave me :[')
        }, { once: true });


        // let LinkedInSearchBar = document.querySelector("#global-nav-typeahead > input");

        LinkedInSearchBar.addEventListener("focus", (event) => {
            alert('DONT LEAVE PLEASE')
        }, { once: true });


        let homeLink = document.querySelector("#global-nav > div > nav > ul > li:nth-child(1) > a");
        let LinkedInSearchBar = document.querySelector("#global-nav-typeahead > input");

        function initTimer() {
            homeLink.addEventListener("focus", (event) => {
                setTimeout(() => {
                    LinkedInSearchBar.addEventListener("focus", (event) => {
                        alert('DONT LEAVE PLEASE')
                    }, { once: true });
                }, 25000);
            }, { once: true });
        }

        initTimer();


        const setCookie = (cname, cvalue, exdays) => {
            let expires = "";

            if (exdays) {
                let day = new Date();
                day.setTime(day.getTime() + exdays * 24 * 60 * 60 * 1000);
                expires = `expires=${day.toUTCString()}`;
            }
            document.cookie = `${cname}=${cvalue};${expires};path=/`;
        };

        const getCookie = (cname) => {
            let ca = document.cookie.split(";");

            for (const cookie of ca) {
                if (cookie.indexOf(cname + "=") > 0) {
                    return cookie.split("=")[1];
                }
            }
            return null;
        };



        const target = document.querySelector('.section:last-child');

        const options = {
            threshold: 0.75,
        }

        function handleIntersection(entries) {
            entries.map((entry) => {
                if (entry.isIntersecting) {
                    console.log('Log event and unobserve')
                    observer.unobserve(target);
                }
            });
        }

        const observer = new IntersectionObserver(handleIntersection, options);

        observer.observe(target);




        // setTimeout(() => {
        //     document.addEventListener("scroll", scrollSpeed);
        // }, 10000);


        // scrollSpeed = () => {
        //     lastPosition = window.scrollY;
        //     setTimeout(() => {
        //         newPosition = window.scrollY;
        //     }, 100);
        //     currentSpeed = newPosition - lastPosition;
        //     console.log(currentSpeed);

        //     if (currentSpeed > 160) {
        //         console.log("Exit intent popup triggered");
        //         document.removeEventListener("scroll", scrollSpeed);
        //     }
        // };


    </script>


</body>

</html>